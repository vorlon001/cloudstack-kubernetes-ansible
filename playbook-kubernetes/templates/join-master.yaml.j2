---
apiVersion: kubeadm.k8s.io/v1beta2
kind: ClusterConfiguration
controlPlaneEndpoint: {{CONTROL_PLANE_IP}}:6443
kubernetesVersion: {{KUBERNETES_VERSION}}
apiServer:
  timeoutForControlPlane: 4m0s
certificatesDir: /etc/kubernetes/pki
---
apiVersion: kubeadm.k8s.io/v1beta3
kind: JoinConfiguration
certificateKey: {{UPLOADTLSKEY}}
discovery:
  bootstrapToken:
    apiServerEndpoint: {{CONTROL_PLANE_IP}}:6443
    token: {{APITOKEN}}
    caCertHashes: ["sha256:{{SHA256_TOKEN}}"]
nodeRegistration:
  taints: null
controlPlane:
  localAPIEndpoint:
        advertiseAddress: "{{ansible_default_ipv4.address}}"
        bindPort: 6443
